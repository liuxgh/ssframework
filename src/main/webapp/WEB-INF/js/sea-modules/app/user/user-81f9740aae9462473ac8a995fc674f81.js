define("app/user/user",["gallery/jquery/jquery-1.10.2.min.js","gallery/My97DatePicker/WdatePicker.js","../common/showUIDialog","../blui/ui-dialog","../base/class","../common/crud","../blui/ui-paging","../blui/ui-dropdown","../blui/ui-show","gallery/template/template.min"],function(a,b){a("gallery/jquery/jquery-1.10.2.min.js");var c=a("gallery/My97DatePicker/WdatePicker.js"),d=a("../common/showUIDialog"),e=a("../common/crud");b.run=function(){$("body").delegate(".u-date","focus",function(){c({readOnly:!0})}),e.run(),d({dialogBtn:".uiDialog",submitBtn:"",cancelBtn:".modal-f-cancelBtn"})}}),define("app/common/showUIDialog",["gallery/jquery/jquery-1.10.2.min.js","app/blui/ui-dialog","app/base/class"],function(a,b,c){a("gallery/jquery/jquery-1.10.2.min.js");var d=a("app/blui/ui-dialog"),e=function(a,b){var c=a.dialogBtn,e=a.submitBtn,f=a.cancelBtn;$("body").delegate(c,"click",function(){{var a=$.trim($(this).attr("data-url")),b=$.trim($(this).attr("data-winWidth")),c=$.trim($(this).attr("data-winHeight"));new d({width:b,height:c}).openajax(a+"?t="+(new Date).getMilliseconds(),function(a){$("body").delegate(f,"click",function(){a.close()})})}}),"function"==typeof b&&$("body").delegate(e,"click",function(){})};c.exports=e}),define("app/blui/ui-dialog",["gallery/jquery/jquery-1.10.2.min.js","app/base/class"],function(a,b,c){a("gallery/jquery/jquery-1.10.2.min.js");var d=a("app/base/class"),e=new d({init:function(a){this.w=a&&a.width||this.settting.width,this.h=a&&a.height||this.settting.height,this.isBg=this.settting.isBg,a&&"boolean"==typeof a.isBg&&(this.isBg=a.isBg),this.errorMsg=a&&a.errorMsg||this.settting.errorMsg;var b="position:fixed;",c=$(window).height();this.h>c&&(b="position:absolute;");var d='<div class="modal-win" style="'+b+"width:"+this.w+"px;height:"+this.h+'px;"><div class="modal-close" title="关闭"></div><div class="modal-content"></div></div>';return this.isBg&&(d='<div class="modal-bg"></div>'+d),this.close(),$("body").append(d),this.position().closeClick().reisze(),this},settting:{width:200,height:200,errorMsg:"非常抱歉，请求出错 ; )",appendDom:$("body"),defaultMsg:"您好，你可以添加自己的内容",isBg:!0},open:function(a,b){return"string"!=typeof a&&(b=a,a=this.settting.defaultMsg),this.dhtml(a,b),this},openajax:function(a,b){var c='<img class="modal-loading" src="/images/blui/loading.gif" />',d="缺少url引用",e=this;return"string"==typeof a?(e.dhtml(c).position(),$.ajax({url:a,type:"post",success:function(a){e.dhtml(a,b)},error:function(){e.dhtml(e.errorMsg)}})):e.dhtml(d),this},openIframe:function(a,b){var c='<img class="modal-loading" src="/images/blui/loading.gif" />',d="缺少url引用",e=this,f="";return"string"==typeof a?(e.dhtml(c).position(),f="<iframe src='"+a+"' style='width:"+this.w+"px;height:"+this.h+"px;border:none;'></iframe>",e.dhtml(f,b)):e.dhtml(d),this},dhtml:function(a,b){return $(".modal-content").html(a),"function"==typeof b&&b(this),this},closeClick:function(){var a=this;return $("body").delegate(".modal-close","click",function(){a.close()}),this},close:function(){var a=$("body");a.children("div.modal-bg").remove(),a.children("div.modal-win").remove()},showMsg:function(a,b,c){{var d="modal-success-icon",e="我是默认的消息提示",f=arguments[0]||1;arguments.length}"number"!=typeof f&&(c=b,b=f,f=1),"function"==typeof b&&(c=b),"number"==typeof f&&(2==f&&(d="modal-warn-icon"),3==f&&(d="modal-error-icon"));var g="<div class='modal-msg "+d+"'>"+e+"</div>";this.dhtml(g),"function"==typeof c&&c()},position:function(){var a=$(window),b=a.width(),c=a.height(),d=(c-this.h)/2,e=(b-this.w)/2;return 0>=d&&(d=10),0>=e&&(e=10),$(".modal-win").css({top:d,left:e+"px"}),$(".modal-win .modal-loading").css({top:this.h/2-32+"px",left:this.w/2-32+"px"}),this},reisze:function(){var a=this;$(window).bind("resize",function(){a.position()})}});c.exports=e}),define("app/base/class",[],function(a,b,c){function d(a,b){function c(a){var c=e(a)?a.prototype:a;for(var d in c)c.hasOwnProperty(d)&&(b[d]=c[d])}if(h(a)){var d,f;for(d=0,f=a.length;f>d;d++)c(a[d])}else c(a)}function e(a){return"[object Function]"===g.call(a)}var f=function(a,b){e(a)||(b=a,a=null);var c=function(){this.init&&c.prototype.hasOwnProperty("init")&&this.init.apply(this,arguments),this.include&&c.prototype.hasOwnProperty("include")&&d(this.include,c.prototype)};if(a){var g=function(){};g.prototype=a.prototype,c.prototype=new g,c.prototype.constructor=c,c._super=a.prototype}return c.include=function(a){for(var b in a)a.hasOwnProperty(b)&&(c.prototype[b]=a[b])},b&&c.include(b),c.extend=function(a){return new f(c,a)},c},g=Object.prototype.toString,h=Array.isArray||function(a){return"[object Array]"===g.call(a)};c.exports=f}),define("app/common/crud",["app/blui/ui-paging","gallery/jquery/jquery-1.10.2.min.js","app/blui/ui-dropdown","app/blui/ui-show","app/blui/ui-dialog","app/base/class","gallery/template/template.min"],function(a,b){var c=(a("app/blui/ui-paging"),a("app/blui/ui-show")),d=a("app/blui/ui-dialog"),e=$(".addBtn"),f=$(".delBtn"),g=$(".editBtn"),h=".modal-f-cancelBtn";b.run=function(){e.click(function(){if("false"===$(this).attr("data-lightBox"))return window.location.href=$(this).attr("href"),!1;{var a=$.trim($(this).attr("data-url")),b=$.trim($(this).attr("data-winWidth")),c=$.trim($(this).attr("data-winHeight"));new d({width:b,height:c}).openajax(a+"?t="+(new Date).getMilliseconds(),function(a){$("body").delegate(h,"click",function(){a.close()})})}}),g.click(function(){{var a=$.trim($(this).attr("data-id")),b=$.trim($(this).attr("data-url")),c=($.trim($(this).attr("data-un")),$.trim($(this).attr("data-winWidth"))),e=$.trim($(this).attr("data-winHeight"));new d({width:c,height:e}).openajax(b+"?id="+a+"&t="+(new Date).getMilliseconds(),function(a){$("body").delegate(h,"click",function(){a.close()})})}}),f.click(function(){{var a=$.trim($(this).attr("data-id")),b=$.trim($(this).attr("data-url")),e=$.trim($(this).attr("data-winWidth")),f=$.trim($(this).attr("data-winHeight")),g=$.trim($(this).attr("data-mes")),h={mes:g,isBtnShow:!0},i=template("common-tips",h);new d({width:e,height:f}).open(i,function(d){$("body").delegate(".modal-f-cancelBtn","click",function(){d.close()}),$("body").delegate(".modal-f-submitBtn","click",function(){b=b+"?t="+(new Date).getMilliseconds(),$.post(b,{id:a},function(a){"True"==a?c.show("删除成功！",function(a){$("body").delegate(".modal-close","click",function(){a.close(),window.location.reload()})}):c.show("删除失败！",function(a){$("body").delegate(".modal-close","click",function(){a.close()})})})})})}})}}),define("app/blui/ui-paging",["gallery/jquery/jquery-1.10.2.min.js","app/blui/ui-dropdown"],function(a,b){a("gallery/jquery/jquery-1.10.2.min.js");var c=$("#pageIndex"),d=$("#searchForm"),e=$.trim($(".paging-totalCount em").text()),f=/^\d{1,4}$/,g=$(".paging-num a,.paging-prev,.paging-next"),h=$(".paging-inputNum input"),i=a("app/blui/ui-dropdown");b.paging=function(){i.dropdownList(),g.click(function(){var a=$.trim($(this).attr("data-pageIndex")),b=$(this).hasClass("paging-disable")||$(this).hasClass("paging-n-current");b||(c.val(a),d.submit())}),h.bind("keypress",function(a){if("13"==a.keyCode){var b=$.trim($(".paging-n-current").attr("data-pageIndex")),g=$.trim($(this).val());if(!f.test(g))return alert("请输入数字"),!1;if(1>g/1||g/1>e/1)return alert("页码超出范围"),!1;b!=g&&(c.val(g),d.submit())}}),$(".paging a.d-m-item").click(function(){var a=$.trim($(this).text());$(this).parents(".dropdown").find(".btn").html(a+"<span class='caret'></span>"),$("#pageSize").val(a),c.val(1),d.submit()})}}),define("app/blui/ui-dropdown",["gallery/jquery/jquery-1.10.2.min.js"],function(a,b){a("gallery/jquery/jquery-1.10.2.min.js");var c=$("body"),d=$(".dropdown ul"),e="<span class='caret'></span>";b.dropdownList=function(){c.delegate(".dropdown","click",function(a){var b=window.event||a;b.stopPropagation?b.stopPropagation():b.cancelBubble=!0,$(".open").removeClass("open"),$(this).toggleClass("open"),$(".f-select").css({"z-index":"2"}),$(this).parents(".f-select").css($(this).hasClass("open")?{"z-index":"3"}:{"z-index":"2"}),"d-m-item"==a.target.className&&$(".open").removeClass("open")}),$(document).click(function(){$(".open").removeClass("open")}),d.find("li").click(function(){var a=$(this).parents(".dropdown").find(".btn"),b=$.trim($(this).find("a").text());a.html(b+e);var c=$.trim($(this).find("a").attr("data-id")),d=$(this).parents(".dropdown").parent().find(".dropdown-input");""!=c&&d.next().hasClass("error")&&d.next().remove(),d.val(c)})}}),define("app/blui/ui-show",["app/blui/ui-dialog","gallery/jquery/jquery-1.10.2.min.js","app/base/class","gallery/template/template.min"],function(a,b){var c=a("app/blui/ui-dialog"),d=a("gallery/template/template.min");b.show=function(a,b){{var e="common-tips",f=470,g=180,h={mes:a,isBtnShow:!1},i=d(e,h);new c({width:f,height:g}).open(i,function(a){"function"==typeof b&&b(a)})}}});
